import{a as T}from"./chunk-R256JDRC.js";import{a as w,c as O,d as y,f as M,h as P,j as k,k as L,m as E}from"./chunk-PWTO733V.js";import{a as x}from"./chunk-ICSTC6YS.js";import"./chunk-WJ5ZAXFD.js";import{$ as u,F as i,Fa as _,I as v,K as h,T as s,U as d,Y as S,Z as r,_ as a,da as p,fa as f,ga as b,ha as l,ia as g,t as m,ua as C}from"./chunk-TP6AUV3H.js";function D(t,c){if(t&1&&(r(0,"h1"),l(1),a()),t&2){let o=f();i(),g(o.errorToShow.message)}}function N(t,c){if(t&1&&(r(0,"p",5),l(1),a()),t&2){let o=f();i(),g(o.formService.getEmailErrorMessage(o.form))}}function j(t,c){if(t&1&&(r(0,"p",5),l(1),a()),t&2){let o=f();i(),g(o.formService.getPasswordErrorMessage(o.form,!0))}}var I=class t{constructor(c){this.location=c}formService=m(T);authService=m(x);router=m(_);errorToShow=null;loginSubscription;form;ngOnInit(){this.form=this.formService.createLoginForm()}onSubmit(){if(!this.formService.isFormInvalid(this.form)){let{email:c,password:o}=this.formService.getLoginFormValue(this.form);this.loginSubscription=this.authService.login(c,o).subscribe({next:e=>{this.router.navigate(["/"])},error:e=>{console.error("Login failed:",e);let n=e.error?.errors;typeof n=="string"?this.errorToShow={message:n}:Array.isArray(n)?this.errorToShow={message:n.join(", ")}:typeof n=="object"&&n!==null?this.errorToShow={message:Object.values(n).join(", ")}:this.errorToShow={message:"Unexpected error occurred"},this.formService.markFormTouched(this.form)}})}}ngOnDestroy(){this.loginSubscription&&(this.loginSubscription.unsubscribe(),console.log("Login request cancelled due to component destroy"))}goBack(){this.location.back()}static \u0275fac=function(o){return new(o||t)(v(C))};static \u0275cmp=h({type:t,selectors:[["app-login"]],decls:18,vars:8,consts:[["id","rightside"],[1,"login-card"],[1,"login-form",3,"ngSubmit","formGroup"],["for","email"],["type","email","id","email","formControlName","email","required",""],[1,"error"],["for","password"],["type","password","id","password","formControlName","password","required",""],["type","submit"],[1,"back-button",3,"click"]],template:function(o,e){o&1&&(r(0,"div",0)(1,"div",1)(2,"h1"),l(3,"Login Form"),a(),s(4,D,2,1,"h1"),r(5,"form",2),p("ngSubmit",function(){return e.onSubmit()}),r(6,"label",3),l(7,"Email"),a(),u(8,"input",4),s(9,N,2,1,"p",5),r(10,"label",6),l(11,"Password"),a(),u(12,"input",7),s(13,j,2,1,"p",5),r(14,"button",8),l(15,"Login"),a(),r(16,"button",9),p("click",function(F){return e.goBack(),F.preventDefault()}),l(17,"Cancel"),a()()()()),o&2&&(i(4),d(e.errorToShow!=null?4:-1),i(),S("formGroup",e.form),i(3),b("input-error",e.formService.isControlInvalid(e.form,"email")),i(),d(e.formService.isControlInvalid(e.form,"email")?9:-1),i(3),b("input-error",e.formService.isControlInvalid(e.form,"password")),i(),d(e.formService.isControlInvalid(e.form,"password")?13:-1))},dependencies:[E,M,w,O,y,L,P,k],styles:["#rightside[_ngcontent-%COMP%]{margin-top:3%;overflow-y:auto;overflow-x:hidden;height:100%;display:flex;justify-content:center;align-items:flex-start}.login-card[_ngcontent-%COMP%]{background-color:#252525;border-radius:8px;padding:2rem;width:100%;max-width:400px;box-shadow:0 0 10px #00ffcc1a;display:flex;flex-direction:column}.login-card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;color:#0fc;margin-bottom:2rem}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.login-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:.3rem;font-weight:700;color:#0fc}.login-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.7rem;border:none;border-radius:4px;background-color:#1e1e1e;color:#fff;outline:none;font-size:1rem;transition:background-color .2s ease}.login-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{background-color:#2a2a2a}.login-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:2rem;padding:.75rem;background-color:#0fc;color:#000;font-weight:700;border:none;border-radius:4px;cursor:pointer;transition:background-color .2s ease}.back-button[_ngcontent-%COMP%]{color:red!important}.login-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#00e6b8}"]})};export{I as Login};
