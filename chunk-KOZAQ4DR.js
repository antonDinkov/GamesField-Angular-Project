import{a as B}from"./chunk-YWYHRI4I.js";import{a as U,c as N,d as G,f as F,h as j,j as D,m as L}from"./chunk-YBQB6ODU.js";import{a as k}from"./chunk-WJ5ZAXFD.js";import{c as w,i as T}from"./chunk-P6VS5ELV.js";import{Ab as p,Bb as a,Cb as d,Na as o,Ra as x,Xa as O,cc as y,da as P,ha as I,ia as _,lb as m,mb as l,qb as E,rb as i,sb as n,tb as f,xb as h,zb as s}from"./chunk-ZL2HHINX.js";var v=class r{constructor(c){this.httpClient=c}apiUrl=k.apiUrl;create(c,t,e,u,C,S,b){return this.httpClient.post(`${this.apiUrl}/create`,{name:c,manufacturer:t,genre:e,image:u,iframeUrl:C,description:S,instructions:b},{withCredentials:!0})}static \u0275fac=function(t){return new(t||r)(I(w))};static \u0275prov=P({token:r,factory:r.\u0275fac,providedIn:"root"})};function A(r,c){if(r&1&&(i(0,"h1",2),a(1),n()),r&2){let t=s();o(),d(t.errorToShow.message)}}function H(r,c){if(r&1&&(i(0,"p",6),a(1),n()),r&2){let t=s();o(),d(t.formService.getTitleErrorMessage(t.form))}}function V(r,c){if(r&1&&(i(0,"p",6),a(1),n()),r&2){let t=s();o(),d(t.formService.getManufacturerErrorMessage(t.form))}}function q(r,c){if(r&1&&(i(0,"p",6),a(1),n()),r&2){let t=s();o(),d(t.formService.getGenreErrorMessage(t.form))}}function $(r,c){if(r&1&&(i(0,"p",6),a(1),n()),r&2){let t=s();o(),d(t.formService.getInstructionsErrorMessage(t.form))}}function J(r,c){if(r&1&&(i(0,"p",6),a(1),n()),r&2){let t=s();o(),d(t.formService.getDescriptionErrorMessage(t.form))}}function K(r,c){if(r&1&&(i(0,"p",6),a(1),n()),r&2){let t=s();o(),d(t.formService.getImageUrlErrorMessage(t.form))}}function Q(r,c){if(r&1&&(i(0,"p",6),a(1),n()),r&2){let t=s();o(),d(t.formService.getGameUrlErrorMessage(t.form))}}var R=class r{constructor(c,t){this.location=c;this.formService=t;this.form=t.createCreateForm()}create=_(v);router=_(T);form;errorToShow=null;createSubscription;onSubmit(){let{title:c,manufacturer:t,genre:e,instructions:u,description:C,imageUrl:S,gameUrl:b}=this.formService.getFormValue(this.form);this.createSubscription=this.create.create(c,t,e,S,b,C,u).subscribe({next:()=>{this.router.navigate(["/catalog"])},error:M=>{console.error("Create Game Failed:",M);let g=M.error?.errors;typeof g=="string"?this.errorToShow={message:g}:Array.isArray(g)?this.errorToShow={message:g.join(", ")}:typeof g=="object"&&g!==null?this.errorToShow={message:Object.values(g).join(", ")}:this.errorToShow={message:"Unexpected error occurred"},this.formService.markFormTouched(this.form)}})}ngOnDestroy(){this.createSubscription?.unsubscribe(),console.log("Create request cancelled due to component destroy")}goBack(){this.location.back()}static \u0275fac=function(t){return new(t||r)(x(y),x(B))};static \u0275cmp=O({type:r,selectors:[["app-create"]],decls:38,vars:23,consts:[["id","rightside"],[1,"create-game-card"],[1,"h1errorToShow"],[1,"create-game-form",3,"ngSubmit","formGroup"],["for","title"],["type","text","id","title","formControlName","title"],[1,"error"],["for","manufacturer"],["type","text","id","manufacturer","formControlName","manufacturer"],["for","genre"],["type","text","id","genre","formControlName","genre"],["for","instructions"],["id","instructions","formControlName","instructions","rows","4"],["for","description"],["id","description","formControlName","description","rows","4"],["for","imageUrl"],["type","url","id","imageUrl","formControlName","imageUrl"],["for","gameUrl"],["type","url","id","gameUrl","formControlName","gameUrl"],["type","submit"],[1,"back-button",3,"click"]],template:function(t,e){t&1&&(i(0,"div",0)(1,"div",1)(2,"h1"),a(3,"Create New Game"),n(),m(4,A,2,1,"h1",2),i(5,"form",3),h("ngSubmit",function(){return e.onSubmit()}),i(6,"label",4),a(7,"Name"),n(),f(8,"input",5),m(9,H,2,1,"p",6),i(10,"label",7),a(11,"Manufacturer"),n(),f(12,"input",8),m(13,V,2,1,"p",6),i(14,"label",9),a(15,"Genre"),n(),f(16,"input",10),m(17,q,2,1,"p",6),i(18,"label",11),a(19,"Instructions"),n(),f(20,"textarea",12),m(21,$,2,1,"p",6),i(22,"label",13),a(23,"Description"),n(),f(24,"textarea",14),m(25,J,2,1,"p",6),i(26,"label",15),a(27,"Image URL"),n(),f(28,"input",16),m(29,K,2,1,"p",6),i(30,"label",17),a(31,"Game URL"),n(),f(32,"input",18),m(33,Q,2,1,"p",6),i(34,"button",19),a(35,"Create"),n(),i(36,"button",20),h("click",function(C){return e.goBack(),C.preventDefault()}),a(37,"Cancel"),n()()()()),t&2&&(o(4),l(e.errorToShow!=null?4:-1),o(),E("formGroup",e.form),o(3),p("input-error",e.formService.isControlInvalid(e.form,"title")),o(),l(e.formService.isControlInvalid(e.form,"title")?9:-1),o(3),p("input-error",e.formService.isControlInvalid(e.form,"manufacturer")),o(),l(e.formService.isControlInvalid(e.form,"manufacturer")?13:-1),o(3),p("input-error",e.formService.isControlInvalid(e.form,"genre")),o(),l(e.formService.isControlInvalid(e.form,"genre")?17:-1),o(3),p("input-error",e.formService.isControlInvalid(e.form,"instructions")),o(),l(e.formService.isControlInvalid(e.form,"instructions")?21:-1),o(3),p("input-error",e.formService.isControlInvalid(e.form,"description")),o(),l(e.formService.isControlInvalid(e.form,"description")?25:-1),o(3),p("input-error",e.formService.isControlInvalid(e.form,"imageUrl")),o(),l(e.formService.isControlInvalid(e.form,"imageUrl")?29:-1),o(3),p("input-error",e.formService.isControlInvalid(e.form,"gameUrl")),o(),l(e.formService.isControlInvalid(e.form,"gameUrl")?33:-1))},dependencies:[L,F,U,N,G,j,D],styles:["#rightside[_ngcontent-%COMP%]{margin-top:3%;overflow-y:auto;overflow-x:hidden;height:100%;display:flex;justify-content:center;align-items:flex-start}.create-game-card[_ngcontent-%COMP%]{background-color:#252525;border-radius:8px;padding:2rem;width:100%;max-width:600px;box-shadow:0 0 10px #00ffcc1a;display:flex;flex-direction:column}.create-game-card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;color:#0fc;margin-bottom:2rem}.create-game-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.create-game-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:.3rem;font-weight:700;color:#0fc}.create-game-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .create-game-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:.7rem;border:none;border-radius:4px;background-color:#1e1e1e;color:#fff;outline:none;font-size:1rem;transition:background-color .2s ease}.create-game-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .create-game-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{background-color:#2a2a2a}.create-game-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}.create-game-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:2rem;padding:.75rem;background-color:#0fc;color:#000;font-weight:700;border:none;border-radius:4px;cursor:pointer;transition:background-color .2s ease}.back-button[_ngcontent-%COMP%]{color:red!important}.create-game-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#00e6b8}.input-error[_ngcontent-%COMP%]{border-left-color:red!important;border-color:red}.error[_ngcontent-%COMP%]{text-align:left;border-radius:.5em;color:red;padding-top:0;font-weight:700;font-size:.875rem;margin-top:.25rem}.create-game-card[_ngcontent-%COMP%] > .h1errorToShow[_ngcontent-%COMP%]{color:#db7093}"]})};export{R as Create};
