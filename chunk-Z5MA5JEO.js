import{a as V}from"./chunk-S7ICHPDX.js";import{a as N,c as j,d as R,f as D,h as A,j as B,m as L}from"./chunk-E25YJNGC.js";import{a as I}from"./chunk-ZBI5FW7N.js";import{a as F}from"./chunk-WJ5ZAXFD.js";import{c as w,g as G,i as k}from"./chunk-7JMMOP44.js";import{Ab as p,Bb as m,Cb as d,Gb as U,Na as r,Ra as C,Xa as O,da as M,dc as T,ha as P,ia as x,lb as l,mb as c,qb as y,rb as o,sb as a,tb as f,xb as E,zb as s}from"./chunk-TAOSYK3F.js";var h=class i{constructor(n){this.httpClient=n}apiUrl=F.apiUrl;edit(n,t,e,u,v,S,b,_){return this.httpClient.post(`${this.apiUrl}/catalog/${n}/edit`,{name:t,manufacturer:e,genre:u,image:v,iframeUrl:S,description:b,instructions:_},{withCredentials:!0})}static \u0275fac=function(t){return new(t||i)(P(w))};static \u0275prov=M({token:i,factory:i.\u0275fac,providedIn:"root"})};function z(i,n){if(i&1&&(o(0,"h1",2),m(1),a()),i&2){let t=s();r(),d(t.errorToShow.message)}}function q(i,n){if(i&1&&(o(0,"p",6),m(1),a()),i&2){let t=s();r(),d(t.formService.getTitleErrorMessage(t.form))}}function J(i,n){if(i&1&&(o(0,"p",6),m(1),a()),i&2){let t=s();r(),d(t.formService.getManufacturerErrorMessage(t.form))}}function K(i,n){if(i&1&&(o(0,"p",6),m(1),a()),i&2){let t=s();r(),d(t.formService.getGenreErrorMessage(t.form))}}function Q(i,n){if(i&1&&(o(0,"p",6),m(1),a()),i&2){let t=s();r(),d(t.formService.getInstructionsErrorMessage(t.form))}}function W(i,n){if(i&1&&(o(0,"p",6),m(1),a()),i&2){let t=s();r(),d(t.formService.getDescriptionErrorMessage(t.form))}}function X(i,n){if(i&1&&(o(0,"p",6),m(1),a()),i&2){let t=s();r(),d(t.formService.getImageUrlErrorMessage(t.form))}}function Y(i,n){if(i&1&&(o(0,"p",6),m(1),a()),i&2){let t=s();r(),d(t.formService.getGameUrlErrorMessage(t.form))}}var $=class i{constructor(n,t,e,u){this.location=n;this.route=t;this.router=e;this.formService=u;this.form=this.formService.createCreateForm()}getGame=x(I);edit=x(h);gameInfo;form;id="";name="";errorToShow=null;ngOnInit(){this.route.params.subscribe(n=>{this.id=n.id,this.name=n.name,this.getGame.getGameById(this.id).subscribe(t=>{let e=t?.post;e&&this.form.patchValue({title:e.name,manufacturer:e.manufacturer,genre:e.genre,instructions:e.instructions,description:e.description,imageUrl:e.image,gameUrl:e.iframeUrl})})})}onSubmit(){let{title:n,manufacturer:t,genre:e,instructions:u,description:v,imageUrl:S,gameUrl:b}=this.formService.getFormValue(this.form);console.log(S,b),this.edit.edit(this.id,n,t,e,S,b,v,u).subscribe({next:()=>{this.router.navigate([`/details/${this.name}/${this.id}`])},error:_=>{console.error("Edit Game Failed:",_);let g=_.error?.errors;typeof g=="string"?this.errorToShow={message:g}:Array.isArray(g)?this.errorToShow={message:g.join(", ")}:typeof g=="object"&&g!==null?this.errorToShow={message:Object.values(g).join(", ")}:this.errorToShow={message:"Unexpected error occurred"},this.formService.markFormTouched(this.form)}})}goBack(){this.location.back()}static \u0275fac=function(t){return new(t||i)(C(T),C(G),C(k),C(V))};static \u0275cmp=O({type:i,selectors:[["app-edit"]],features:[U([I])],decls:38,vars:23,consts:[["id","rightside"],[1,"edit-game-card"],[1,"h1errorToShow"],[1,"edit-game-form",3,"ngSubmit","formGroup"],["for","title"],["type","text","id","title","formControlName","title"],[1,"error"],["for","manufacturer"],["type","text","id","manufacturer","formControlName","manufacturer"],["for","genre"],["type","text","id","genre","formControlName","genre"],["for","instructions"],["id","instructions","formControlName","instructions","rows","4"],["for","description"],["id","description","formControlName","description","rows","4"],["for","imageUrl"],["type","url","id","imageUrl","formControlName","imageUrl"],["for","gameUrl"],["type","url","id","gameUrl","formControlName","gameUrl"],["type","submit"],[1,"back-button",3,"click"]],template:function(t,e){t&1&&(o(0,"div",0)(1,"div",1)(2,"h1"),m(3,"Edit Game"),a(),l(4,z,2,1,"h1",2),o(5,"form",3),E("ngSubmit",function(){return e.onSubmit()}),o(6,"label",4),m(7,"Name"),a(),f(8,"input",5),l(9,q,2,1,"p",6),o(10,"label",7),m(11,"Manufacturer"),a(),f(12,"input",8),l(13,J,2,1,"p",6),o(14,"label",9),m(15,"Genre"),a(),f(16,"input",10),l(17,K,2,1,"p",6),o(18,"label",11),m(19,"Instructions"),a(),f(20,"textarea",12),l(21,Q,2,1,"p",6),o(22,"label",13),m(23,"Description"),a(),f(24,"textarea",14),l(25,W,2,1,"p",6),o(26,"label",15),m(27,"Image URL"),a(),f(28,"input",16),l(29,X,2,1,"p",6),o(30,"label",17),m(31,"Game URL"),a(),f(32,"input",18),l(33,Y,2,1,"p",6),o(34,"button",19),m(35,"Save"),a(),o(36,"button",20),E("click",function(v){return e.goBack(),v.preventDefault()}),m(37,"Cancel"),a()()()()),t&2&&(r(4),c(e.errorToShow!=null?4:-1),r(),y("formGroup",e.form),r(3),p("input-error",e.formService.isControlInvalid(e.form,"title")),r(),c(e.formService.isControlInvalid(e.form,"title")?9:-1),r(3),p("input-error",e.formService.isControlInvalid(e.form,"manufacturer")),r(),c(e.formService.isControlInvalid(e.form,"manufacturer")?13:-1),r(3),p("input-error",e.formService.isControlInvalid(e.form,"genre")),r(),c(e.formService.isControlInvalid(e.form,"genre")?17:-1),r(3),p("input-error",e.formService.isControlInvalid(e.form,"instructions")),r(),c(e.formService.isControlInvalid(e.form,"instructions")?21:-1),r(3),p("input-error",e.formService.isControlInvalid(e.form,"description")),r(),c(e.formService.isControlInvalid(e.form,"description")?25:-1),r(3),p("input-error",e.formService.isControlInvalid(e.form,"imageUrl")),r(),c(e.formService.isControlInvalid(e.form,"imageUrl")?29:-1),r(3),p("input-error",e.formService.isControlInvalid(e.form,"gameUrl")),r(),c(e.formService.isControlInvalid(e.form,"gameUrl")?33:-1))},dependencies:[L,D,N,j,R,A,B],styles:["#rightside[_ngcontent-%COMP%]{margin-top:3%;overflow-y:auto;overflow-x:hidden;height:100%;display:flex;justify-content:center;align-items:flex-start}.edit-game-card[_ngcontent-%COMP%]{background-color:#252525;border-radius:8px;padding:2rem;width:100%;max-width:600px;box-shadow:0 0 10px #00ffcc1a;display:flex;flex-direction:column}.edit-game-card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;color:#0fc;margin-bottom:2rem}.edit-game-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.edit-game-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:.3rem;font-weight:700;color:#0fc}.edit-game-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .edit-game-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:.7rem;border:none;border-radius:4px;background-color:#1e1e1e;color:#fff;outline:none;font-size:1rem;transition:background-color .2s ease}.edit-game-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .edit-game-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{background-color:#2a2a2a}.edit-game-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}.edit-game-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:2rem;padding:.75rem;background-color:#0fc;color:#000;font-weight:700;border:none;border-radius:4px;cursor:pointer;transition:background-color .2s ease}.edit-game-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#00e6b8}.back-button[_ngcontent-%COMP%]{color:red!important}.edit-game-card[_ngcontent-%COMP%] > .h1errorToShow[_ngcontent-%COMP%]{color:#db7093}"]})};export{$ as Edit};
