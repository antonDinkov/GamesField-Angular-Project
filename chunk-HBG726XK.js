import{a as _}from"./chunk-WJ5ZAXFD.js";import{Aa as h,Da as b,I as c,K as d,P as u,aa as f,ba as y,ea as v,ha as g,m as o,p as s,s as m,t as p,z as n}from"./chunk-TP6AUV3H.js";var r=class i{constructor(e){this.httpClient=e}apiUrl=_.apiUrl;_like=n(null);like$=this._like.asReadonly();_views=n(null);views$=this._views.asReadonly();_played=n(null);played$=this._played.asReadonly();interactWithTheGame(e,t){return this.httpClient.post(`${this.apiUrl}/catalog/${e}/interact`,{interaction:t},{withCredentials:!0}).pipe(o(a=>(this._like.set(a.likes.length),this._views.set(a.views),this._played.set(a.played),a)))}static \u0275fac=function(t){return new(t||i)(m(h))};static \u0275prov=s({token:i,factory:i.\u0275fac,providedIn:"root"})};var k=class i{constructor(e){this.route=e}game;likeService=p(r);played=new u;safeUrl;startGame(){this.likeService.interactWithTheGame(this.game._id,"played").subscribe(e=>{this.played.emit(e.played)}),this.safeUrl=this.game.iframeUrl.trim(),window.open(this.safeUrl,"_blank")}static \u0275fac=function(t){return new(t||i)(c(b))};static \u0275cmp=d({type:i,selectors:[["app-play-btn"]],inputs:{game:"game"},outputs:{played:"played"},decls:2,vars:0,consts:[[1,"playBtn",3,"click"]],template:function(t,l){t&1&&(f(0,"button",0),v("click",function(){return l.startGame()}),g(1,"Play"),y())},styles:[".playBtn[_ngcontent-%COMP%]{all:unset;display:flex;align-items:center;justify-content:center;padding:.5rem 1rem;height:20px;min-width:80px;background-color:#0fc;color:#000;text-decoration:none;border-radius:4px;font-weight:700;transition:background-color .2s ease;cursor:pointer}"]})};export{r as a,k as b};
