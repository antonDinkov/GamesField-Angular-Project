import{a as D}from"./chunk-R256JDRC.js";import{a as O,c as E,d as y,f as R,h as I,i as k,j as N,k as T,m as F}from"./chunk-PWTO733V.js";import{a as M}from"./chunk-ICSTC6YS.js";import"./chunk-WJ5ZAXFD.js";import{$ as p,F as o,Fa as P,I as h,K as x,T as m,U as c,Y as S,Z as i,_ as n,da as _,fa as d,ga as g,ha as a,ia as f,t as v,ua as w}from"./chunk-TP6AUV3H.js";function j(r,s){if(r&1&&(i(0,"h1"),a(1),n()),r&2){let t=d();o(),f(t.errorToShow.message)}}function q(r,s){if(r&1&&(i(0,"p",5),a(1),n()),r&2){let t=d();o(),f(t.formService.getFirstnameErrorMessage(t.form))}}function A(r,s){if(r&1&&(i(0,"p",5),a(1),n()),r&2){let t=d();o(),f(t.formService.getLastnameErrorMessage(t.form))}}function L(r,s){if(r&1&&(i(0,"p",5),a(1),n()),r&2){let t=d();o(),f(t.formService.getEmailErrorMessage(t.form))}}function B(r,s){if(r&1&&(i(0,"p",5),a(1),n()),r&2){let t=d();o(),f(t.formService.getPasswordErrorMessage(t.form,!0))}}function V(r,s){if(r&1&&(i(0,"p",5),a(1),n()),r&2){let t=d();o(),f(t.formService.getRePasswordErrorMessage(t.form))}}var G=class r{constructor(s){this.location=s}formService=v(D);authService=v(M);router=v(P);registerSubscription;errorToShow=null;form;ngOnInit(){this.form=this.formService.createRegisterForm()}onSubmit(){if(!this.formService.isFormInvalid(this.form)){let{firstname:s,lastname:t,email:e,password:b,repass:C}=this.formService.getRegisterFormValue(this.form);this.registerSubscription=this.authService.register(s,t,e,b,C).subscribe({next:u=>{console.log("Registered user:",u),this.router.navigate(["/"])},error:u=>{console.error("Registration failed:",u);let l=u.error?.errors;typeof l=="string"?this.errorToShow={message:l}:Array.isArray(l)?this.errorToShow={message:l.join(", ")}:typeof l=="object"&&l!==null?this.errorToShow={message:Object.values(l).join(", ")}:this.errorToShow={message:"Unexpected error occurred"},this.formService.markFormTouched(this.form)}})}}ngOnDestroy(){this.registerSubscription&&(this.registerSubscription.unsubscribe(),console.log("Register request cancelled due to component destroy"))}goBack(){this.location.back()}static \u0275fac=function(t){return new(t||r)(h(w))};static \u0275cmp=x({type:r,selectors:[["app-register"]],decls:31,vars:18,consts:[["id","rightside"],[1,"register-card"],[1,"register-form",3,"ngSubmit","formGroup"],["for","first-name"],["type","text","id","first-name","formControlName","firstname","required",""],[1,"error"],["for","last-name"],["type","text","id","last-name","formControlName","lastname","required",""],["for","email"],["type","email","id","email","formControlName","email","required",""],["formGroupName","passwords",1,"form"],["for","password"],["type","password","id","password","formControlName","password","required",""],["for","repass"],["type","password","id","repass","formControlName","repass","required",""],["type","submit",3,"disabled"],[1,"back-button",3,"click"]],template:function(t,e){t&1&&(i(0,"div",0)(1,"div",1)(2,"h1"),a(3,"REGISTER FORM"),n(),m(4,j,2,1,"h1"),i(5,"form",2),_("ngSubmit",function(){return e.onSubmit()}),i(6,"label",3),a(7,"First Name"),n(),p(8,"input",4),m(9,q,2,1,"p",5),i(10,"label",6),a(11,"Last Name"),n(),p(12,"input",7),m(13,A,2,1,"p",5),i(14,"label",8),a(15,"Email"),n(),p(16,"input",9),m(17,L,2,1,"p",5),i(18,"div",10)(19,"label",11),a(20,"Password"),n(),p(21,"input",12),m(22,B,2,1,"p",5),i(23,"label",13),a(24,"Repeat Password"),n(),p(25,"input",14),m(26,V,2,1,"p",5),n(),i(27,"button",15),a(28,"Register"),n(),i(29,"button",16),_("click",function(C){return e.goBack(),C.preventDefault()}),a(30,"Cancel"),n()()()()),t&2&&(o(4),c(e.errorToShow!=null?4:-1),o(),S("formGroup",e.form),o(3),g("input-error",e.formService.isControlInvalid(e.form,"firstname")),o(),c(e.formService.isControlInvalid(e.form,"firstname")?9:-1),o(3),g("input-error",e.formService.isControlInvalid(e.form,"lastname")),o(),c(e.formService.isControlInvalid(e.form,"lastname")?13:-1),o(3),g("input-error",e.formService.isControlInvalid(e.form,"email")),o(),c(e.formService.isControlInvalid(e.form,"email")?17:-1),o(4),g("input-error",e.formService.isNestedControlInvalid(e.form,"passwords","password")),o(),c(e.formService.isNestedControlInvalid(e.form,"passwords","password")?22:-1),o(3),g("input-error",e.formService.isNestedControlInvalid(e.form,"passwords","repass")),o(),c(e.formService.isNestedControlInvalid(e.form,"passwords","repass")?26:-1),o(),S("disabled",e.formService.isFormInvalid(e.form)))},dependencies:[F,R,O,E,y,T,I,N,k],styles:["#rightside[_ngcontent-%COMP%]{margin-top:3%;overflow-y:auto;overflow-x:hidden;height:100%;display:flex;justify-content:center;align-items:flex-start}.register-card[_ngcontent-%COMP%]{background-color:#252525;border-radius:8px;padding:2rem;width:100%;max-width:400px;box-shadow:0 0 10px #00ffcc1a;display:flex;flex-direction:column}.register-card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;color:#0fc;margin-bottom:2rem}.register-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.register-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:.3rem;font-weight:700;color:#0fc}.register-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.7rem;border:none;border-radius:4px;background-color:#1e1e1e;color:#fff;outline:none;font-size:1rem;transition:background-color .2s ease}.register-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{background-color:#2a2a2a}.register-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:2rem;padding:.75rem;background-color:#0fc;color:#000;font-weight:700;border:none;border-radius:4px;cursor:pointer;transition:background-color .2s ease}.back-button[_ngcontent-%COMP%]{color:red!important}.register-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#00e6b8}.register-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#6c757d;cursor:not-allowed;transform:none}.input-error[_ngcontent-%COMP%]{border-left-color:red!important;border-color:red}.error[_ngcontent-%COMP%]{text-align:left;border-radius:.5em;color:red;padding-top:0;font-weight:700;font-size:.875rem;margin-top:.25rem}.text-center[_ngcontent-%COMP%]{text-align:center;margin:0}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]})};export{G as Register};
