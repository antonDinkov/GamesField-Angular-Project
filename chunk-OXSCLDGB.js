import{f as u,o as p}from"./chunk-FXQ427PN.js";import{K as i,O as g,S as l,ca as a,q as o}from"./chunk-PTR6WFQT.js";var m=class n{constructor(s){this.httpClient=s;let e=localStorage.getItem("user");e&&(this._user.set(JSON.parse(e)),this._isLoggedIn.set(!0))}_isLoggedIn=a(!1);isLoggedIn=this._isLoggedIn.asReadonly();_user=a(null);user=this._user.asReadonly();apiUrl=p.apiUrl;register(s,e,t,d,h){return this.httpClient.post(`${this.apiUrl}/register`,{firstName:s,lastName:e,email:t,password:d,repass:h},{withCredentials:!0}).pipe(i(r=>{this._isLoggedIn.set(!0),this._user.set(r.user),localStorage.setItem("user",JSON.stringify(r.user))}),o(r=>r.user))}login(s,e){return this.httpClient.post(`${this.apiUrl}/login`,{email:s,password:e},{withCredentials:!0}).pipe(i(t=>{this._isLoggedIn.set(!0),this._user.set(t.user),localStorage.setItem("user",JSON.stringify(t.user))}),o(t=>t.user))}logout(){return this.httpClient.get(`${this.apiUrl}/logout`,{withCredentials:!0}).pipe(i(()=>{this._isLoggedIn.set(!1),this._user.set(null),localStorage.removeItem("user")}))}static \u0275fac=function(e){return new(e||n)(l(u))};static \u0275prov=g({token:n,factory:n.\u0275fac,providedIn:"root"})};export{m as a};
