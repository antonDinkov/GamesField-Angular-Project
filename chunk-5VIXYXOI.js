import{a as G}from"./chunk-THGQJ4IN.js";import{a as w}from"./chunk-DKOAWYT7.js";import{a as A}from"./chunk-FNVD4K27.js";import{f as O,i as P,l as D,o as L}from"./chunk-QOPNELFI.js";import{Ea as E,I as v,K as h,O as I,S as b,T as s,Ta as p,Ua as g,Xa as c,Y as C,Ya as o,Z as k,Za as i,_a as x,cb as M,db as S,ea as d,fb as f,hb as a,ib as l,kb as _,ra as y,ta as r}from"./chunk-RYPZXW43.js";var u=class n{constructor(t){this.httpClient=t}apiUrl=L.apiUrl;_like=d(null);like$=this._like.asReadonly();likeTheGame(t){return this.httpClient.get(`${this.apiUrl}/catalog/${t}/interact`,{withCredentials:!0}).pipe(h(m=>(this._like.set(m.likes.length),m)))}static \u0275fac=function(e){return new(e||n)(b(O))};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})};var z=(n,t)=>["/details",n,t,"edit"],F=(n,t)=>["/details",n,t,"delete"];function U(n,t){if(n&1){let e=M();o(0,"button",9),S("click",function(){C(e);let T=f(2);return k(T.onLike())}),a(1,"Like"),i()}}function V(n,t){if(n&1&&(o(0,"a",10),a(1,"Edit"),i(),o(2,"a",10),a(3,"Delete"),i()),n&2){let e=f(2);c("routerLink",_(2,z,e.gameInfo.name,e.gameInfo._id)),r(2),c("routerLink",_(5,F,e.gameInfo.name,e.gameInfo._id))}}function $(n,t){if(n&1&&(o(0,"div",1)(1,"h1",2),a(2),i(),o(3,"div",3),x(4,"img",4),o(5,"div",5)(6,"p")(7,"strong"),a(8,"Manufacturer:"),i(),a(9),i(),o(10,"p")(11,"strong"),a(12,"Genre:"),i(),a(13),i(),o(14,"p")(15,"strong"),a(16,"Views:"),i(),a(17),i(),o(18,"p")(19,"strong"),a(20,"Played:"),i(),a(21),i(),o(22,"p")(23,"strong"),a(24,"Likes:"),i(),a(25),i(),o(26,"p")(27,"strong"),a(28,"Instructions:"),i(),a(29),i(),o(30,"p")(31,"strong"),a(32,"Description:"),i(),a(33),i(),o(34,"div",6),x(35,"app-play-btn",7),p(36,U,2,0,"button",8),p(37,V,4,8),i()()()()),n&2){let e=f();r(2),l(e.gameInfo.name),r(2),c("src",e.gameInfo.image,y),r(5),l(e.gameInfo.manufacturer),r(4),l(e.gameInfo.genre),r(4),l(e.gameInfo.views),r(4),l(e.gameInfo.played),r(4),l(e.gameInfo.likes.length),r(4),l(e.gameInfo.instructions),r(4),l(e.gameInfo.description),r(2),c("game",e.gameInfo),r(),g(e.isLoggedIn()&&e.isAuthor()===!1?36:-1),r(),g(e.isLoggedIn()&&e.isAuthor()===!0?37:-1)}}function B(n,t){n&1&&(o(0,"p"),a(1,"LOADING..."),i())}var N=class n{isLoggedIn=s(G).isLoggedIn;gameService=s(A);route=s(P);id="";gameInfo;isAuthor=d(!1);username;hasInteracted;interactionCount;interactorsNames;likeService=s(u);likes=this.likeService.like$();ngOnInit(){this.route.paramMap.pipe(v(t=>(this.id=t.get("id"),this.gameService.getGameById(this.id)))).subscribe(t=>{this.gameInfo=t.post,this.isAuthor.set(t.isAuthor),this.username=t.username,this.hasInteracted=t.hasInteracted,this.interactionCount=t.interactionCount,this.interactorsNames=t.interactorsNames})}onLike(){this.likeService.likeTheGame(this.id).subscribe(t=>{this.gameInfo=t})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=E({type:n,selectors:[["app-details"]],decls:3,vars:1,consts:[["id","rigthside"],[1,"container"],[1,"game-title"],[1,"game-details"],["alt","no image",1,"game-image",3,"src"],[1,"info"],[1,"buttons"],[1,"play-button",3,"game"],[1,"play-button"],[1,"play-button",3,"click"],[1,"play-button",3,"routerLink"]],template:function(e,m){e&1&&(o(0,"div",0),p(1,$,38,12,"div",1)(2,B,2,0,"p"),i()),e&2&&(r(),g(m.gameInfo?1:2))},dependencies:[w,D],styles:[".container[_ngcontent-%COMP%]{height:100%;background-color:#252525;margin-top:1.5em;padding:30px;border-radius:12px;box-shadow:0 0 20px #0000001a}.game-title[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:20px;text-align:center;color:#91ffce}.game-details[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:30px;flex-wrap:wrap}.game-image[_ngcontent-%COMP%]{max-width:400px;width:100%;border-radius:12px}.info[_ngcontent-%COMP%]{flex:1}.info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0;font-size:1.1rem}.info[_ngcontent-%COMP%] > p[_ngcontent-%COMP%] > strong[_ngcontent-%COMP%]{color:#91ffce}.play-button[_ngcontent-%COMP%]{margin-top:20px;padding:12px 25px;font-size:1.2rem;background-color:#06d6a0;border:none;color:#fff;border-radius:8px;cursor:pointer;transition:background-color .3s ease}.play-button[_ngcontent-%COMP%]:hover{background-color:#04b88a}.buttons[_ngcontent-%COMP%]{display:flex;gap:5%;justify-content:center}.buttons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;display:flex;align-items:center}"]})};export{N as Details};
