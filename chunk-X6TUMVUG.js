import{a as D}from"./chunk-KGKVMXOA.js";import{a as O,c as E,d as y,f as R,h as I,i as k,j as N,k as T,m as F}from"./chunk-YBQB6ODU.js";import{a as M}from"./chunk-VEA5O2PX.js";import"./chunk-WJ5ZAXFD.js";import{i as P}from"./chunk-P6VS5ELV.js";import{Ab as g,Bb as a,Cb as f,Na as o,Ra as h,Xa as x,cc as w,ia as v,lb as m,mb as c,qb as S,rb as i,sb as n,tb as p,xb as _,zb as d}from"./chunk-ZL2HHINX.js";function j(t,s){if(t&1&&(i(0,"h1",2),a(1),n()),t&2){let r=d();o(),f(r.errorToShow.message)}}function q(t,s){if(t&1&&(i(0,"p",6),a(1),n()),t&2){let r=d();o(),f(r.formService.getFirstnameErrorMessage(r.form))}}function A(t,s){if(t&1&&(i(0,"p",6),a(1),n()),t&2){let r=d();o(),f(r.formService.getLastnameErrorMessage(r.form))}}function L(t,s){if(t&1&&(i(0,"p",6),a(1),n()),t&2){let r=d();o(),f(r.formService.getEmailErrorMessage(r.form))}}function B(t,s){if(t&1&&(i(0,"p",6),a(1),n()),t&2){let r=d();o(),f(r.formService.getPasswordErrorMessage(r.form,!0))}}function V(t,s){if(t&1&&(i(0,"p",6),a(1),n()),t&2){let r=d();o(),f(r.formService.getRePasswordErrorMessage(r.form))}}var G=class t{constructor(s){this.location=s}formService=v(D);authService=v(M);router=v(P);registerSubscription;errorToShow=null;form;ngOnInit(){this.form=this.formService.createRegisterForm()}onSubmit(){if(!this.formService.isFormInvalid(this.form)){let{firstname:s,lastname:r,email:e,password:C,repass:b}=this.formService.getRegisterFormValue(this.form);this.registerSubscription=this.authService.register(s,r,e,C,b).subscribe({next:u=>{console.log("Registered user:",u),this.router.navigate(["/"])},error:u=>{console.error("Registration failed:",u);let l=u.error?.errors;typeof l=="string"?this.errorToShow={message:l}:Array.isArray(l)?this.errorToShow={message:l.join(", ")}:typeof l=="object"&&l!==null?this.errorToShow={message:Object.values(l).join(", ")}:this.errorToShow={message:"Unexpected error occurred"},this.formService.markFormTouched(this.form)}})}}ngOnDestroy(){this.registerSubscription&&(this.registerSubscription.unsubscribe(),console.log("Register request cancelled due to component destroy"))}goBack(){this.location.back()}static \u0275fac=function(r){return new(r||t)(h(w))};static \u0275cmp=x({type:t,selectors:[["app-register"]],decls:31,vars:18,consts:[["id","rightside"],[1,"register-card"],[1,"h1errorToShow"],[1,"register-form",3,"ngSubmit","formGroup"],["for","first-name"],["type","text","id","first-name","formControlName","firstname","required",""],[1,"error"],["for","last-name"],["type","text","id","last-name","formControlName","lastname","required",""],["for","email"],["type","email","id","email","formControlName","email","required",""],["formGroupName","passwords",1,"form"],["for","password"],["type","password","id","password","formControlName","password","required",""],["for","repass"],["type","password","id","repass","formControlName","repass","required",""],["type","submit",3,"disabled"],[1,"back-button",3,"click"]],template:function(r,e){r&1&&(i(0,"div",0)(1,"div",1)(2,"h1"),a(3,"REGISTER FORM"),n(),m(4,j,2,1,"h1",2),i(5,"form",3),_("ngSubmit",function(){return e.onSubmit()}),i(6,"label",4),a(7,"First Name"),n(),p(8,"input",5),m(9,q,2,1,"p",6),i(10,"label",7),a(11,"Last Name"),n(),p(12,"input",8),m(13,A,2,1,"p",6),i(14,"label",9),a(15,"Email"),n(),p(16,"input",10),m(17,L,2,1,"p",6),i(18,"div",11)(19,"label",12),a(20,"Password"),n(),p(21,"input",13),m(22,B,2,1,"p",6),i(23,"label",14),a(24,"Repeat Password"),n(),p(25,"input",15),m(26,V,2,1,"p",6),n(),i(27,"button",16),a(28,"Register"),n(),i(29,"button",17),_("click",function(b){return e.goBack(),b.preventDefault()}),a(30,"Cancel"),n()()()()),r&2&&(o(4),c(e.errorToShow!=null?4:-1),o(),S("formGroup",e.form),o(3),g("input-error",e.formService.isControlInvalid(e.form,"firstname")),o(),c(e.formService.isControlInvalid(e.form,"firstname")?9:-1),o(3),g("input-error",e.formService.isControlInvalid(e.form,"lastname")),o(),c(e.formService.isControlInvalid(e.form,"lastname")?13:-1),o(3),g("input-error",e.formService.isControlInvalid(e.form,"email")),o(),c(e.formService.isControlInvalid(e.form,"email")?17:-1),o(4),g("input-error",e.formService.isNestedControlInvalid(e.form,"passwords","password")),o(),c(e.formService.isNestedControlInvalid(e.form,"passwords","password")?22:-1),o(3),g("input-error",e.formService.isNestedControlInvalid(e.form,"passwords","repass")),o(),c(e.formService.isNestedControlInvalid(e.form,"passwords","repass")?26:-1),o(),S("disabled",e.formService.isFormInvalid(e.form)))},dependencies:[F,R,O,E,y,T,I,N,k],styles:["#rightside[_ngcontent-%COMP%]{margin-top:3%;overflow-y:auto;overflow-x:hidden;height:100%;display:flex;justify-content:center;align-items:flex-start}.register-card[_ngcontent-%COMP%]{background-color:#252525;border-radius:8px;padding:2rem;width:100%;max-width:400px;box-shadow:0 0 10px #00ffcc1a;display:flex;flex-direction:column}.register-card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;color:#0fc;margin-bottom:2rem}.register-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.register-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:.3rem;font-weight:700;color:#0fc}.register-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.7rem;border:none;border-radius:4px;background-color:#1e1e1e;color:#fff;outline:none;font-size:1rem;transition:background-color .2s ease}.register-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{background-color:#2a2a2a}.register-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:2rem;padding:.75rem;background-color:#0fc;color:#000;font-weight:700;border:none;border-radius:4px;cursor:pointer;transition:background-color .2s ease}.back-button[_ngcontent-%COMP%]{color:red!important}.register-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#00e6b8}.register-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#6c757d;cursor:not-allowed;transform:none}.input-error[_ngcontent-%COMP%]{border-left-color:red!important;border-color:red}.error[_ngcontent-%COMP%]{text-align:left;border-radius:.5em;color:red;padding-top:0;font-weight:700;font-size:.875rem;margin-top:.25rem}.text-center[_ngcontent-%COMP%]{text-align:center;margin:0}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.register-card[_ngcontent-%COMP%] > .h1errorToShow[_ngcontent-%COMP%]{color:#db7093}"]})};export{G as Register};
