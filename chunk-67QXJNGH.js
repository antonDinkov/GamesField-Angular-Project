import{a as M,b as m,c as F,d as x,e as y,f as I,h as G,i as O,j as k,k as q,l as T,m as L}from"./chunk-UGO5H7GV.js";import{a as A}from"./chunk-XVNBEJS5.js";import{A as w,B as _,J as p,K as u,O as N,P as n,Q as a,R as f,V as h,X as g,Y as v,Z as s,_ as C,ja as S,k as E,o as c,ta as P,y as i}from"./chunk-L5EMEBZ7.js";var b=class o{formBuilder=c(T);createProfileForm(){let t=localStorage.getItem("user"),e=t?JSON.parse(t):"",r=e.email,l=e.firstName,d=e.lastName;return this.formBuilder.group({firstName:[l,[m.required,m.minLength(4)]],lastName:[d,[m.required,m.minLength(4)]],email:[r,[m.required,m.pattern(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/)]],passwords:this.formBuilder.group({password:["",[m.required,m.minLength(5),m.pattern(/^[a-zA-Z0-9]+$/)]],repass:["",[m.required]]},{validators:this.passwordMatchValidator}),picture:[null]})}getNestedControl(t,e,r){return t.get(e)?.get(r)}passwordMatchValidator(t){let e=t.get("password"),r=t.get("repass");return!e||!r?null:e.value!==r.value?(r.setErrors({passwordMismatch:!0}),{passwordMismatch:!0}):(r.hasError("passwordMismatch")&&r.setErrors(null),null)}getControl(t,e){return t.get(e)}isControlInvalid(t,e){let r=this.getControl(t,e);return r?.invalid&&(r?.dirty||r?.touched)||!1}isNestedControlInvalid(t,e,r){let l=this.getNestedControl(t,e,r);return l?.invalid&&(l?.dirty||l?.touched)||!1}getFirstNameErrorMessage(t){let e=this.getControl(t,"firstName");return e?.errors?.required?"First name is required!":e?.errors?.minlength?"First Name should have at least 4 symbols!":""}getLastNameErrorMessage(t){let e=this.getControl(t,"lastName");return e?.errors?.required?"Last name is required!":e?.errors?.minlength?"Last Name should have at least 4 symbols!":""}getEmailErrorMessage(t){let e=this.getControl(t,"email");return e?.errors?.required?"Email is required!":e?.errors?.pattern?"Email should be a valid email address!":""}getPasswordErrorMessage(t,e=!1){let r=e?this.getNestedControl(t,"passwords","password"):this.getControl(t,"password");return r?.errors?.required?"Password is required!":r?.errors?.minlength?"Password should be at least 5 characters!":r?.errors?.pattern?"Password should contain only English letters and digits!":e&&t.get("passwords")?.errors?.passwordMismatch?"Passwords do not match!":""}getRePasswordErrorMessage(t){let e=this.getNestedControl(t,"passwords","repass"),r=t.get("passwords");return e?.errors?.required?"Repeat Password is required!":r?.errors?.passwordMismatch?"Passwords do not match!":""}markFormTouched(t){Object.keys(t.controls).forEach(e=>{let r=t.get(e);r instanceof y?Object.keys(r.controls).forEach(l=>{r.get(l)?.markAsTouched()}):r?.markAsTouched()})}isFormInvalid(t){return t.invalid}getProfileFormValue(t){let{firstname:e,lastname:r,email:l,picture:d}=t.value,{password:j,repass:D}=t.value.passwords;return{firstname:e,lastname:r,email:l,picture:d,password:j,repass:D}}static \u0275fac=function(e){return new(e||o)};static \u0275prov=E({token:o,factory:o.\u0275fac,providedIn:"root"})};function B(o,t){if(o&1&&(n(0,"p",5),s(1),a()),o&2){let e=g();i(),C(e.formService.getFirstNameErrorMessage(e.form))}}function R(o,t){if(o&1&&(n(0,"p",5),s(1),a()),o&2){let e=g();i(),C(e.formService.getLastNameErrorMessage(e.form))}}function Z(o,t){if(o&1&&(n(0,"p",5),s(1),a()),o&2){let e=g();i(),C(e.formService.getEmailErrorMessage(e.form))}}function $(o,t){if(o&1&&(n(0,"p",5),s(1),a()),o&2){let e=g();i(),C(e.formService.getPasswordErrorMessage(e.form,!0))}}function H(o,t){if(o&1&&(n(0,"p",5),s(1),a()),o&2){let e=g();i(),C(e.formService.getRePasswordErrorMessage(e.form))}}var V=class o{constructor(t){this.location=t;this.form=this.formService.createProfileForm()}formService=c(b);authService=c(A);router=c(P);form;onSubmit(){}goBack(){this.location.back()}onFileSelected(t){let e=t.target.files?.[0]||null;this.form.get("picture")?.setValue(e),this.form.get("picture")?.updateValueAndValidity()}static \u0275fac=function(e){return new(e||o)(w(S))};static \u0275cmp=_({type:o,selectors:[["app-edit"]],decls:33,vars:16,consts:[["id","rightside"],[1,"edit-profile-card"],[1,"edit-profile-form",3,"ngSubmit","formGroup"],["for","firstName"],["type","text","id","firstName","formControlName","firstName","value","\u0418\u0432\u0430\u043D","required",""],[1,"error"],["for","lastName"],["type","text","id","lastName","formControlName","lastName","value","\u0418\u0432\u0430\u043D\u043E\u0432","required",""],["for","email"],["type","email","id","email","formControlName","email","value","ivan@example.com","required",""],["formGroupName","passwords",1,"edit-profile-form"],["for","password"],["type","password","id","password","formControlName","password"],["for","repass"],["type","password","id","repass","formControlName","repass"],["for","picture"],["type","file","id","picture","formControlName","picture","accept","image/*",3,"change"],["type","submit"],[1,"back-button",3,"click"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"div",1)(2,"h1"),s(3,"Edit Profile"),a(),n(4,"form",2),h("ngSubmit",function(){return r.onSubmit()}),n(5,"label",3),s(6,"First name"),a(),f(7,"input",4),p(8,B,2,1,"p",5),n(9,"label",6),s(10,"Last Name"),a(),f(11,"input",7),p(12,R,2,1,"p",5),n(13,"label",8),s(14,"Email"),a(),f(15,"input",9),p(16,Z,2,1,"p",5),n(17,"div",10)(18,"label",11),s(19,"New Password"),a(),f(20,"input",12),p(21,$,2,1,"p",5),n(22,"label",13),s(23,"Repeat New Password"),a(),f(24,"input",14),p(25,H,2,1,"p",5),a(),n(26,"label",15),s(27,"Profile Picture"),a(),n(28,"input",16),h("change",function(d){return r.onFileSelected(d)}),a(),n(29,"button",17),s(30,"Save The Changes"),a(),n(31,"button",18),h("click",function(d){return r.goBack(),d.preventDefault()}),s(32,"CANCEL"),a()()()()),e&2&&(i(4),N("formGroup",r.form),i(3),v("input-error",r.formService.isControlInvalid(r.form,"firstName")),i(),u(r.formService.isControlInvalid(r.form,"firstName")?8:-1),i(3),v("input-error",r.formService.isControlInvalid(r.form,"lastName")),i(),u(r.formService.isControlInvalid(r.form,"lastName")?12:-1),i(3),v("input-error",r.formService.isControlInvalid(r.form,"email")),i(),u(r.formService.isControlInvalid(r.form,"email")?16:-1),i(4),v("input-error",r.formService.isNestedControlInvalid(r.form,"passwords","password")),i(),u(r.formService.isNestedControlInvalid(r.form,"passwords","password")?21:-1),i(3),v("input-error",r.formService.isNestedControlInvalid(r.form,"passwords","repass")),i(),u(r.formService.isNestedControlInvalid(r.form,"passwords","repass")?25:-1))},dependencies:[L,I,M,F,x,q,G,k,O],styles:["#rightside[_ngcontent-%COMP%]{margin-top:3%;overflow-y:auto;overflow-x:hidden;height:100%;display:flex;justify-content:center;align-items:flex-start}.edit-profile-card[_ngcontent-%COMP%]{background-color:#252525;border-radius:8px;padding:2rem;width:100%;max-width:600px;box-shadow:0 0 10px #00ffcc1a;display:flex;flex-direction:column}.edit-profile-card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;color:#0fc;margin-bottom:2rem}.edit-profile-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.edit-profile-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:.3rem;font-weight:700;color:#0fc}.edit-profile-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.7rem;border:2px solid transparent;border-radius:4px;background-color:#1e1e1e;color:#fff;outline:none;font-size:1rem;transition:background-color .2s ease}.edit-profile-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{background-color:#2a2a2a}.edit-profile-form[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{padding:.4rem;color:#0fc}.edit-profile-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:2rem;padding:.75rem;background-color:#0fc;color:#000;font-weight:700;border:none;border-radius:4px;cursor:pointer;transition:background-color .2s ease}.back-button[_ngcontent-%COMP%]{color:red!important}.edit-profile-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#00e6b8}.input-error[_ngcontent-%COMP%]{border-left-color:red!important}.error[_ngcontent-%COMP%]{text-align:left;border-radius:.5em;color:red;padding-top:0;font-weight:700;font-size:.875rem;margin-top:.25rem}"]})};export{V as Edit};
