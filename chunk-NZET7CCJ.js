import{a as q,b as l,c as w,d as N,e as T,f as k,g as j,i as D,k as L,l as R}from"./chunk-OV4PSTYW.js";import{f as U,k as O,o as y}from"./chunk-PT7EJJHT.js";import{Ca as G,O as _,Ra as s,S as I,Sa as d,T as b,Va as E,Wa as n,Xa as a,Ya as u,ab as P,cb as f,db as g,eb as m,fb as p,ra as i,wa as F}from"./chunk-3UFXEZJ4.js";var S=class o{constructor(t){this.httpClient=t}apiUrl=y.apiUrl;create(t,e,r,c,C,v,h){return this.httpClient.post(`${this.apiUrl}/create`,{name:t,manufacturer:e,genre:r,image:c,iframeUrl:C,description:v,instructions:h},{withCredentials:!0})}static \u0275fac=function(e){return new(e||o)(I(U))};static \u0275prov=_({token:o,factory:o.\u0275fac,providedIn:"root"})};var x=class o{formBuilder=b(L);createCreateForm(){return this.formBuilder.group({title:["",[l.required]],manufacturer:["",[l.required]],genre:["",[l.required]],instructions:["",[l.required,l.minLength(10)]],description:["",[l.required,l.minLength(20)]],imageUrl:["",[l.required,l.pattern(/^https?:\/\//)]],gameUrl:["",[l.required]]})}getControl(t,e){return t.get(e)}isControlInvalid(t,e){let r=this.getControl(t,e);return r?.invalid&&(r?.dirty||r?.touched)||!1}getTitleErrorMessage(t){return this.getControl(t,"title")?.errors?.required?"Title is required!":""}getManufacturerErrorMessage(t){return this.getControl(t,"manufacturer")?.errors?.required?"Manufacturer is required!":""}getGenreErrorMessage(t){return this.getControl(t,"genre")?.errors?.required?"Genre is required!":""}getInstructionsErrorMessage(t){let e=this.getControl(t,"instructions");return e?.errors?.required?"Instructions is required!":e?.errors?.minlength?"Instructions should be atleast 10 characters long!":""}getDescriptionErrorMessage(t){let e=this.getControl(t,"description");return e?.errors?.required?"Description is required!":e?.errors?.minlength?"Description should be atleast 10 characters long!":""}getImageUrlErrorMessage(t){let e=this.getControl(t,"imageUrl");return e?.errors?.required?"Image URL is required!":e?.errors?.pattern?'Image URL should always start with "http://" or "https://"!':""}getGameUrlErrorMessage(t){let e=this.getControl(t,"gameUrl");return e?.errors?.required?"Game URL is required!":e?.errors?.pattern?"Game URL should be a valid email address!":""}markFormTouched(t){Object.keys(t.controls).forEach(e=>{let r=t.get(e);r instanceof T?Object.keys(r.controls).forEach(c=>{r.get(c)?.markAsTouched()}):r?.markAsTouched()})}isFormInvalid(t){return t.invalid}getFormValue(t){let{title:e,manufacturer:r,genre:c,instructions:C,description:v,imageUrl:h,gameUrl:M}=t.value;return{title:e,manufacturer:r,genre:c,instructions:C,description:v,imageUrl:h,gameUrl:M}}static \u0275fac=function(e){return new(e||o)};static \u0275prov=_({token:o,factory:o.\u0275fac,providedIn:"root"})};function B(o,t){if(o&1&&(n(0,"p",5),m(1),a()),o&2){let e=f();i(),p(e.formService.getTitleErrorMessage(e.form))}}function H(o,t){if(o&1&&(n(0,"p",5),m(1),a()),o&2){let e=f();i(),p(e.formService.getManufacturerErrorMessage(e.form))}}function $(o,t){if(o&1&&(n(0,"p",5),m(1),a()),o&2){let e=f();i(),p(e.formService.getGenreErrorMessage(e.form))}}function J(o,t){if(o&1&&(n(0,"p",5),m(1),a()),o&2){let e=f();i(),p(e.formService.getInstructionsErrorMessage(e.form))}}function K(o,t){if(o&1&&(n(0,"p",5),m(1),a()),o&2){let e=f();i(),p(e.formService.getDescriptionErrorMessage(e.form))}}function Q(o,t){if(o&1&&(n(0,"p",5),m(1),a()),o&2){let e=f();i(),p(e.formService.getImageUrlErrorMessage(e.form))}}function W(o,t){if(o&1&&(n(0,"p",5),m(1),a()),o&2){let e=f();i(),p(e.formService.getGameUrlErrorMessage(e.form))}}var z=class o{constructor(t){this.formService=t;this.form=t.createCreateForm()}create=b(S);router=b(O);form;onSubmit(){let{title:t,manufacturer:e,genre:r,instructions:c,description:C,imageUrl:v,gameUrl:h}=this.formService.getFormValue(this.form);this.create.create(t,e,r,v,h,C,c).subscribe({next:()=>{this.router.navigate(["/catalog"])},error:M=>{console.error("Create Game Failed:",M),this.formService.markFormTouched(this.form)}})}static \u0275fac=function(e){return new(e||o)(F(x))};static \u0275cmp=G({type:o,selectors:[["app-create"]],decls:35,vars:22,consts:[["id","rightside"],[1,"create-game-card"],[1,"create-game-form",3,"ngSubmit","formGroup"],["for","title"],["type","text","id","title","formControlName","title"],[1,"error"],["for","manufacturer"],["type","text","id","manufacturer","formControlName","manufacturer"],["for","genre"],["type","text","id","genre","formControlName","genre"],["for","instructions"],["id","instructions","formControlName","instructions","rows","4"],["for","description"],["id","description","formControlName","description","rows","4"],["for","imageUrl"],["type","url","id","imageUrl","formControlName","imageUrl"],["for","gameUrl"],["type","url","id","gameUrl","formControlName","gameUrl"],["type","submit"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"div",1)(2,"h1"),m(3,"Create New Game"),a(),n(4,"form",2),P("ngSubmit",function(){return r.onSubmit()}),n(5,"label",3),m(6,"Name"),a(),u(7,"input",4),s(8,B,2,1,"p",5),n(9,"label",6),m(10,"Manufacturer"),a(),u(11,"input",7),s(12,H,2,1,"p",5),n(13,"label",8),m(14,"Genre"),a(),u(15,"input",9),s(16,$,2,1,"p",5),n(17,"label",10),m(18,"Instructions"),a(),u(19,"textarea",11),s(20,J,2,1,"p",5),n(21,"label",12),m(22,"Description"),a(),u(23,"textarea",13),s(24,K,2,1,"p",5),n(25,"label",14),m(26,"Image URL"),a(),u(27,"input",15),s(28,Q,2,1,"p",5),n(29,"label",16),m(30,"Game URL"),a(),u(31,"input",17),s(32,W,2,1,"p",5),n(33,"button",18),m(34,"Create"),a()()()()),e&2&&(i(4),E("formGroup",r.form),i(3),g("input-error",r.formService.isControlInvalid(r.form,"title")),i(),d(r.formService.isControlInvalid(r.form,"title")?8:-1),i(3),g("input-error",r.formService.isControlInvalid(r.form,"manufacturer")),i(),d(r.formService.isControlInvalid(r.form,"manufacturer")?12:-1),i(3),g("input-error",r.formService.isControlInvalid(r.form,"genre")),i(),d(r.formService.isControlInvalid(r.form,"genre")?16:-1),i(3),g("input-error",r.formService.isControlInvalid(r.form,"instructions")),i(),d(r.formService.isControlInvalid(r.form,"instructions")?20:-1),i(3),g("input-error",r.formService.isControlInvalid(r.form,"description")),i(),d(r.formService.isControlInvalid(r.form,"description")?24:-1),i(3),g("input-error",r.formService.isControlInvalid(r.form,"imageUrl")),i(),d(r.formService.isControlInvalid(r.form,"imageUrl")?28:-1),i(3),g("input-error",r.formService.isControlInvalid(r.form,"gameUrl")),i(),d(r.formService.isControlInvalid(r.form,"gameUrl")?32:-1))},dependencies:[R,k,q,w,N,j,D],styles:["#rightside[_ngcontent-%COMP%]{margin-top:3%;overflow-y:auto;overflow-x:hidden;height:100%;display:flex;justify-content:center;align-items:flex-start}.create-game-card[_ngcontent-%COMP%]{background-color:#252525;border-radius:8px;padding:2rem;width:100%;max-width:600px;box-shadow:0 0 10px #00ffcc1a;display:flex;flex-direction:column}.create-game-card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;color:#0fc;margin-bottom:2rem}.create-game-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.create-game-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:.3rem;font-weight:700;color:#0fc}.create-game-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .create-game-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:.7rem;border:none;border-radius:4px;background-color:#1e1e1e;color:#fff;outline:none;font-size:1rem;transition:background-color .2s ease}.create-game-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .create-game-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{background-color:#2a2a2a}.create-game-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}.create-game-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:2rem;padding:.75rem;background-color:#0fc;color:#000;font-weight:700;border:none;border-radius:4px;cursor:pointer;transition:background-color .2s ease}.create-game-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#00e6b8}.input-error[_ngcontent-%COMP%]{border-left-color:red!important;border-color:red}.error[_ngcontent-%COMP%]{text-align:left;border-radius:.5em;color:red;padding-top:0;font-weight:700;font-size:.875rem;margin-top:.25rem}"]})};export{z as Create};
