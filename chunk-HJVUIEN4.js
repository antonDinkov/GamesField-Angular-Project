import{f as u,o as p}from"./chunk-LSEY7MOQ.js";import{K as i,O as l,S as g,ca as a,q as n}from"./chunk-QZ627ZYP.js";var d=class o{constructor(t){this.httpClient=t;let e=localStorage.getItem("user");e&&(this._user.set(JSON.parse(e)),this._isLoggedIn.set(!0))}_isLoggedIn=a(!1);isLoggedIn=this._isLoggedIn.asReadonly();_user=a(null);user=this._user.asReadonly();apiUrl=p.apiUrl;register(t,e,r,m,h){return this.httpClient.post(`${this.apiUrl}/register`,{firstName:t,lastName:e,email:r,password:m,repass:h},{withCredentials:!0}).pipe(i(s=>{this._isLoggedIn.set(!0),this._user.set(s.user),localStorage.setItem("user",JSON.stringify(s.user))}),n(s=>s.user))}login(t,e){return this.httpClient.post(`${this.apiUrl}/login`,{email:t,password:e},{withCredentials:!0}).pipe(i(r=>{this._isLoggedIn.set(!0),this._user.set(r.user),localStorage.setItem("user",JSON.stringify(r.user))}),n(r=>r.user))}logout(){return this.httpClient.get(`${this.apiUrl}/logout`,{withCredentials:!0}).pipe(i(t=>{this._isLoggedIn.set(!1),this._user.set(null),localStorage.removeItem("user")}))}static \u0275fac=function(e){return new(e||o)(g(u))};static \u0275prov=l({token:o,factory:o.\u0275fac,providedIn:"root"})};export{d as a};
