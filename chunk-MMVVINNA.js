import{a as L}from"./chunk-SCSKDQJO.js";import{a as F,c as N,d as w,f as T,h as R,j as D,m as j}from"./chunk-O44RIJDE.js";import{a as A}from"./chunk-KEEMGIVZ.js";import{$ as m,A as r,Aa as k,C as v,D as M,L as l,M as c,Q as P,R as n,S as a,T as s,X as h,Z as d,_ as f,aa as p,m as E,ma as O,p as I,q as x,ra as U,ua as G,wa as y}from"./chunk-PQ727SL6.js";var _=class i{constructor(o){this.httpClient=o}apiUrl=k.apiUrl;edit(o,t,e,g,u,C,b,S){return this.httpClient.post(`${this.apiUrl}/catalog/${o}/edit`,{name:t,manufacturer:e,genre:g,image:u,iframeUrl:C,description:b,instructions:S},{withCredentials:!0})}static \u0275fac=function(t){return new(t||i)(I(U))};static \u0275prov=E({token:i,factory:i.\u0275fac,providedIn:"root"})};function $(i,o){if(i&1&&(n(0,"p",5),m(1),a()),i&2){let t=d();r(),p(t.formService.getTitleErrorMessage(t.form))}}function H(i,o){if(i&1&&(n(0,"p",5),m(1),a()),i&2){let t=d();r(),p(t.formService.getManufacturerErrorMessage(t.form))}}function z(i,o){if(i&1&&(n(0,"p",5),m(1),a()),i&2){let t=d();r(),p(t.formService.getGenreErrorMessage(t.form))}}function q(i,o){if(i&1&&(n(0,"p",5),m(1),a()),i&2){let t=d();r(),p(t.formService.getInstructionsErrorMessage(t.form))}}function J(i,o){if(i&1&&(n(0,"p",5),m(1),a()),i&2){let t=d();r(),p(t.formService.getDescriptionErrorMessage(t.form))}}function K(i,o){if(i&1&&(n(0,"p",5),m(1),a()),i&2){let t=d();r(),p(t.formService.getImageUrlErrorMessage(t.form))}}function Q(i,o){if(i&1&&(n(0,"p",5),m(1),a()),i&2){let t=d();r(),p(t.formService.getGameUrlErrorMessage(t.form))}}var B=class i{constructor(o,t,e,g){this.location=o;this.route=t;this.router=e;this.formService=g;this.form=this.formService.createCreateForm()}getGame=x(A);edit=x(_);gameInfo;form;id="";name="";ngOnInit(){this.route.params.subscribe(o=>{this.id=o.id,this.name=o.name,this.getGame.getGameById(this.id).subscribe(t=>{let e=t?.post;e&&this.form.patchValue({title:e.name,manufacturer:e.manufacturer,genre:e.genre,instructions:e.instructions,description:e.description,imageUrl:e.image,gameUrl:e.iframeUrl})})})}onSubmit(){let{title:o,manufacturer:t,genre:e,instructions:g,description:u,imageUrl:C,gameUrl:b}=this.formService.getFormValue(this.form);console.log(C,b),this.edit.edit(this.id,o,t,e,C,b,u,g).subscribe({next:()=>{this.router.navigate([`/details/${this.name}/${this.id}`])},error:S=>{console.error("Edit Game Failed:",S),this.formService.markFormTouched(this.form)}})}goBack(){this.location.back()}static \u0275fac=function(t){return new(t||i)(v(O),v(G),v(y),v(L))};static \u0275cmp=M({type:i,selectors:[["app-edit"]],decls:37,vars:22,consts:[["id","rightside"],[1,"edit-game-card"],[1,"edit-game-form",3,"ngSubmit","formGroup"],["for","title"],["type","text","id","title","formControlName","title"],[1,"error"],["for","manufacturer"],["type","text","id","manufacturer","formControlName","manufacturer"],["for","genre"],["type","text","id","genre","formControlName","genre"],["for","instructions"],["id","instructions","formControlName","instructions","rows","4"],["for","description"],["id","description","formControlName","description","rows","4"],["for","imageUrl"],["type","url","id","imageUrl","formControlName","imageUrl"],["for","gameUrl"],["type","url","id","gameUrl","formControlName","gameUrl"],["type","submit"],[1,"back-button",3,"click"]],template:function(t,e){t&1&&(n(0,"div",0)(1,"div",1)(2,"h1"),m(3,"Edit Game"),a(),n(4,"form",2),h("ngSubmit",function(){return e.onSubmit()}),n(5,"label",3),m(6,"Name"),a(),s(7,"input",4),l(8,$,2,1,"p",5),n(9,"label",6),m(10,"Manufacturer"),a(),s(11,"input",7),l(12,H,2,1,"p",5),n(13,"label",8),m(14,"Genre"),a(),s(15,"input",9),l(16,z,2,1,"p",5),n(17,"label",10),m(18,"Instructions"),a(),s(19,"textarea",11),l(20,q,2,1,"p",5),n(21,"label",12),m(22,"Description"),a(),s(23,"textarea",13),l(24,J,2,1,"p",5),n(25,"label",14),m(26,"Image URL"),a(),s(27,"input",15),l(28,K,2,1,"p",5),n(29,"label",16),m(30,"Game URL"),a(),s(31,"input",17),l(32,Q,2,1,"p",5),n(33,"button",18),m(34,"Save"),a(),n(35,"button",19),h("click",function(u){return e.goBack(),u.preventDefault()}),m(36,"Cancel"),a()()()()),t&2&&(r(4),P("formGroup",e.form),r(3),f("input-error",e.formService.isControlInvalid(e.form,"title")),r(),c(e.formService.isControlInvalid(e.form,"title")?8:-1),r(3),f("input-error",e.formService.isControlInvalid(e.form,"manufacturer")),r(),c(e.formService.isControlInvalid(e.form,"manufacturer")?12:-1),r(3),f("input-error",e.formService.isControlInvalid(e.form,"genre")),r(),c(e.formService.isControlInvalid(e.form,"genre")?16:-1),r(3),f("input-error",e.formService.isControlInvalid(e.form,"instructions")),r(),c(e.formService.isControlInvalid(e.form,"instructions")?20:-1),r(3),f("input-error",e.formService.isControlInvalid(e.form,"description")),r(),c(e.formService.isControlInvalid(e.form,"description")?24:-1),r(3),f("input-error",e.formService.isControlInvalid(e.form,"imageUrl")),r(),c(e.formService.isControlInvalid(e.form,"imageUrl")?28:-1),r(3),f("input-error",e.formService.isControlInvalid(e.form,"gameUrl")),r(),c(e.formService.isControlInvalid(e.form,"gameUrl")?32:-1))},dependencies:[j,T,F,N,w,R,D],styles:["#rightside[_ngcontent-%COMP%]{margin-top:3%;overflow-y:auto;overflow-x:hidden;height:100%;display:flex;justify-content:center;align-items:flex-start}.edit-game-card[_ngcontent-%COMP%]{background-color:#252525;border-radius:8px;padding:2rem;width:100%;max-width:600px;box-shadow:0 0 10px #00ffcc1a;display:flex;flex-direction:column}.edit-game-card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;color:#0fc;margin-bottom:2rem}.edit-game-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.edit-game-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:.3rem;font-weight:700;color:#0fc}.edit-game-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .edit-game-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:.7rem;border:none;border-radius:4px;background-color:#1e1e1e;color:#fff;outline:none;font-size:1rem;transition:background-color .2s ease}.edit-game-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .edit-game-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{background-color:#2a2a2a}.edit-game-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}.edit-game-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:2rem;padding:.75rem;background-color:#0fc;color:#000;font-weight:700;border:none;border-radius:4px;cursor:pointer;transition:background-color .2s ease}.edit-game-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#00e6b8}.back-button[_ngcontent-%COMP%]{color:red!important}"]})};export{B as Edit};
