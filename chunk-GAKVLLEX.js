import{a as B}from"./chunk-WKJS6A4Z.js";import{a as U,c as N,d as G,f as F,h as j,j as D,m as L}from"./chunk-7FEWQYPY.js";import{a as T}from"./chunk-WJ5ZAXFD.js";import{i as w,o as k}from"./chunk-U6HMZKYF.js";import{Ab as p,Bb as a,Cb as d,Na as o,Ra as x,Xa as O,cc as y,da as I,ha as P,ia as _,lb as c,mb as l,qb as E,rb as i,sb as n,tb as f,xb as h,zb as s}from"./chunk-LF5J2TJP.js";var v=class r{constructor(m){this.httpClient=m}apiUrl=T.apiUrl;create(m,t,e,g,C,b,S){return this.httpClient.post(`${this.apiUrl}/create`,{name:m,manufacturer:t,genre:e,image:g,iframeUrl:C,description:b,instructions:S},{withCredentials:!0})}static \u0275fac=function(t){return new(t||r)(P(w))};static \u0275prov=I({token:r,factory:r.\u0275fac,providedIn:"root"})};function A(r,m){if(r&1&&(i(0,"h1"),a(1),n()),r&2){let t=s();o(),d(t.errorToShow.message)}}function H(r,m){if(r&1&&(i(0,"p",5),a(1),n()),r&2){let t=s();o(),d(t.formService.getTitleErrorMessage(t.form))}}function V(r,m){if(r&1&&(i(0,"p",5),a(1),n()),r&2){let t=s();o(),d(t.formService.getManufacturerErrorMessage(t.form))}}function q(r,m){if(r&1&&(i(0,"p",5),a(1),n()),r&2){let t=s();o(),d(t.formService.getGenreErrorMessage(t.form))}}function $(r,m){if(r&1&&(i(0,"p",5),a(1),n()),r&2){let t=s();o(),d(t.formService.getInstructionsErrorMessage(t.form))}}function J(r,m){if(r&1&&(i(0,"p",5),a(1),n()),r&2){let t=s();o(),d(t.formService.getDescriptionErrorMessage(t.form))}}function K(r,m){if(r&1&&(i(0,"p",5),a(1),n()),r&2){let t=s();o(),d(t.formService.getImageUrlErrorMessage(t.form))}}function Q(r,m){if(r&1&&(i(0,"p",5),a(1),n()),r&2){let t=s();o(),d(t.formService.getGameUrlErrorMessage(t.form))}}var R=class r{constructor(m,t){this.location=m;this.formService=t;this.form=t.createCreateForm()}create=_(v);router=_(k);form;errorToShow=null;createSubscription;onSubmit(){let{title:m,manufacturer:t,genre:e,instructions:g,description:C,imageUrl:b,gameUrl:S}=this.formService.getFormValue(this.form);this.createSubscription=this.create.create(m,t,e,b,S,C,g).subscribe({next:()=>{this.router.navigate(["/catalog"])},error:M=>{console.error("Create Game Failed:",M);let u=M.error?.errors;typeof u=="string"?this.errorToShow={message:u}:Array.isArray(u)?this.errorToShow={message:u.join(", ")}:typeof u=="object"&&u!==null?this.errorToShow={message:Object.values(u).join(", ")}:this.errorToShow={message:"Unexpected error occurred"},this.formService.markFormTouched(this.form)}})}ngOnDestroy(){this.createSubscription?.unsubscribe(),console.log("Create request cancelled due to component destroy")}goBack(){this.location.back()}static \u0275fac=function(t){return new(t||r)(x(y),x(B))};static \u0275cmp=O({type:r,selectors:[["app-create"]],decls:38,vars:23,consts:[["id","rightside"],[1,"create-game-card"],[1,"create-game-form",3,"ngSubmit","formGroup"],["for","title"],["type","text","id","title","formControlName","title"],[1,"error"],["for","manufacturer"],["type","text","id","manufacturer","formControlName","manufacturer"],["for","genre"],["type","text","id","genre","formControlName","genre"],["for","instructions"],["id","instructions","formControlName","instructions","rows","4"],["for","description"],["id","description","formControlName","description","rows","4"],["for","imageUrl"],["type","url","id","imageUrl","formControlName","imageUrl"],["for","gameUrl"],["type","url","id","gameUrl","formControlName","gameUrl"],["type","submit"],[1,"back-button",3,"click"]],template:function(t,e){t&1&&(i(0,"div",0)(1,"div",1)(2,"h1"),a(3,"Create New Game"),n(),c(4,A,2,1,"h1"),i(5,"form",2),h("ngSubmit",function(){return e.onSubmit()}),i(6,"label",3),a(7,"Name"),n(),f(8,"input",4),c(9,H,2,1,"p",5),i(10,"label",6),a(11,"Manufacturer"),n(),f(12,"input",7),c(13,V,2,1,"p",5),i(14,"label",8),a(15,"Genre"),n(),f(16,"input",9),c(17,q,2,1,"p",5),i(18,"label",10),a(19,"Instructions"),n(),f(20,"textarea",11),c(21,$,2,1,"p",5),i(22,"label",12),a(23,"Description"),n(),f(24,"textarea",13),c(25,J,2,1,"p",5),i(26,"label",14),a(27,"Image URL"),n(),f(28,"input",15),c(29,K,2,1,"p",5),i(30,"label",16),a(31,"Game URL"),n(),f(32,"input",17),c(33,Q,2,1,"p",5),i(34,"button",18),a(35,"Create"),n(),i(36,"button",19),h("click",function(C){return e.goBack(),C.preventDefault()}),a(37,"Cancel"),n()()()()),t&2&&(o(4),l(e.errorToShow!=null?4:-1),o(),E("formGroup",e.form),o(3),p("input-error",e.formService.isControlInvalid(e.form,"title")),o(),l(e.formService.isControlInvalid(e.form,"title")?9:-1),o(3),p("input-error",e.formService.isControlInvalid(e.form,"manufacturer")),o(),l(e.formService.isControlInvalid(e.form,"manufacturer")?13:-1),o(3),p("input-error",e.formService.isControlInvalid(e.form,"genre")),o(),l(e.formService.isControlInvalid(e.form,"genre")?17:-1),o(3),p("input-error",e.formService.isControlInvalid(e.form,"instructions")),o(),l(e.formService.isControlInvalid(e.form,"instructions")?21:-1),o(3),p("input-error",e.formService.isControlInvalid(e.form,"description")),o(),l(e.formService.isControlInvalid(e.form,"description")?25:-1),o(3),p("input-error",e.formService.isControlInvalid(e.form,"imageUrl")),o(),l(e.formService.isControlInvalid(e.form,"imageUrl")?29:-1),o(3),p("input-error",e.formService.isControlInvalid(e.form,"gameUrl")),o(),l(e.formService.isControlInvalid(e.form,"gameUrl")?33:-1))},dependencies:[L,F,U,N,G,j,D],styles:["#rightside[_ngcontent-%COMP%]{margin-top:3%;overflow-y:auto;overflow-x:hidden;height:100%;display:flex;justify-content:center;align-items:flex-start}.create-game-card[_ngcontent-%COMP%]{background-color:#252525;border-radius:8px;padding:2rem;width:100%;max-width:600px;box-shadow:0 0 10px #00ffcc1a;display:flex;flex-direction:column}.create-game-card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;color:#0fc;margin-bottom:2rem}.create-game-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.create-game-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:.3rem;font-weight:700;color:#0fc}.create-game-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .create-game-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:.7rem;border:none;border-radius:4px;background-color:#1e1e1e;color:#fff;outline:none;font-size:1rem;transition:background-color .2s ease}.create-game-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .create-game-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{background-color:#2a2a2a}.create-game-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}.create-game-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:2rem;padding:.75rem;background-color:#0fc;color:#000;font-weight:700;border:none;border-radius:4px;cursor:pointer;transition:background-color .2s ease}.back-button[_ngcontent-%COMP%]{color:red!important}.create-game-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#00e6b8}.input-error[_ngcontent-%COMP%]{border-left-color:red!important;border-color:red}.error[_ngcontent-%COMP%]{text-align:left;border-radius:.5em;color:red;padding-top:0;font-weight:700;font-size:.875rem;margin-top:.25rem}"]})};export{R as Create};
