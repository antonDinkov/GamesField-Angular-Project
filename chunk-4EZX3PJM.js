import{a as E}from"./chunk-IQL5A6I5.js";import{m as F,n as p,o as T,q as I,r as D}from"./chunk-6IVFBHBX.js";import{a as x,c as w,d as O,f as M,h as P,j as y,k as L,m as k}from"./chunk-E25YJNGC.js";import{Ab as h,Bb as l,Cb as d,Na as i,Ra as S,Xa as v,dc as _,ia as f,lb as c,mb as m,qb as C,rb as n,sb as a,tb as g,xb as u,zb as s}from"./chunk-TAOSYK3F.js";var b=T(D),U=p(b,e=>e.user),N=p(b,e=>e.loading),A=p(b,e=>e.error);function q(e,r){if(e&1&&(n(0,"h1",2),l(1),a()),e&2){let o=s();i(),d(o.errorToShow.message)}}function $(e,r){if(e&1&&(n(0,"p",6),l(1),a()),e&2){let o=s();i(),d(o.formService.getEmailErrorMessage(o.form))}}function B(e,r){if(e&1&&(n(0,"p",6),l(1),a()),e&2){let o=s();i(),d(o.formService.getPasswordErrorMessage(o.form,!0))}}var G=class e{constructor(r){this.location=r}formService=f(E);store=f(F);form;loading$=this.store.select(N);error$=this.store.select(A);errorToShow=null;errorSubscription;ngOnInit(){this.form=this.formService.createLoginForm(),this.errorSubscription=this.error$.subscribe(r=>{r?(this.errorToShow={message:r},this.formService.markFormTouched(this.form)):this.errorToShow=null})}onSubmit(){if(!this.formService.isFormInvalid(this.form)){let{email:r,password:o}=this.formService.getLoginFormValue(this.form);this.store.dispatch(I.login({email:r,password:o}))}}ngOnDestroy(){this.errorSubscription?.unsubscribe()}goBack(){this.location.back()}static \u0275fac=function(o){return new(o||e)(S(_))};static \u0275cmp=v({type:e,selectors:[["app-login"]],decls:18,vars:8,consts:[["id","rightside"],[1,"login-card"],[1,"h1errorToShow"],[1,"login-form",3,"ngSubmit","formGroup"],["for","email"],["type","email","id","email","formControlName","email","required",""],[1,"error"],["for","password"],["type","password","id","password","formControlName","password","required",""],["type","submit"],[1,"back-button",3,"click"]],template:function(o,t){o&1&&(n(0,"div",0)(1,"div",1)(2,"h1"),l(3,"Login Form"),a(),c(4,q,2,1,"h1",2),n(5,"form",3),u("ngSubmit",function(){return t.onSubmit()}),n(6,"label",4),l(7,"Email"),a(),g(8,"input",5),c(9,$,2,1,"p",6),n(10,"label",7),l(11,"Password"),a(),g(12,"input",8),c(13,B,2,1,"p",6),n(14,"button",9),l(15,"Login"),a(),n(16,"button",10),u("click",function(j){return t.goBack(),j.preventDefault()}),l(17,"Cancel"),a()()()()),o&2&&(i(4),m(t.errorToShow!=null?4:-1),i(),C("formGroup",t.form),i(3),h("input-error",t.formService.isControlInvalid(t.form,"email")),i(),m(t.formService.isControlInvalid(t.form,"email")?9:-1),i(3),h("input-error",t.formService.isControlInvalid(t.form,"password")),i(),m(t.formService.isControlInvalid(t.form,"password")?13:-1))},dependencies:[k,M,x,w,O,L,P,y],styles:["#rightside[_ngcontent-%COMP%]{margin-top:3%;overflow-y:auto;overflow-x:hidden;height:100%;display:flex;justify-content:center;align-items:flex-start}.login-card[_ngcontent-%COMP%]{background-color:#252525;border-radius:8px;padding:2rem;width:100%;max-width:400px;box-shadow:0 0 10px #00ffcc1a;display:flex;flex-direction:column}.login-card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;color:#0fc;margin-bottom:2rem}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.login-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:.3rem;font-weight:700;color:#0fc}.login-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.7rem;border:none;border-radius:4px;background-color:#1e1e1e;color:#fff;outline:none;font-size:1rem;transition:background-color .2s ease}.login-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{background-color:#2a2a2a}.login-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:2rem;padding:.75rem;background-color:#0fc;color:#000;font-weight:700;border:none;border-radius:4px;cursor:pointer;transition:background-color .2s ease}.back-button[_ngcontent-%COMP%]{color:red!important}.login-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#00e6b8}.login-card[_ngcontent-%COMP%] > .h1errorToShow[_ngcontent-%COMP%]{color:#db7093!important}"]})};export{G as Login};
